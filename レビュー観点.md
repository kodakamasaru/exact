# レビュー観点・採点基準

このドキュメントでは、採用試験における評価観点と採点基準を定義しています。

---

## 評価概要

| 項目 | 配点 | 備考 |
|------|------|------|
| 総合点 | 100点 | |
| 合格ライン | 60点以上 | 致命的バグを1つでも残している場合は不合格 |

### 評価の2つの軸

| 軸 | 配点 | 内容 |
|----|------|------|
| 実装力 | 60点 | 非致命的バグの発見・対応能力 |
| 協働力 | 40点 | GitHub運用、コミュニケーション能力 |
| ボーナス | +α | 中級バグ発見等（100点を超える加点） |

### 致命的バグについて

致命的バグ（3グループ）を全て修正することが**必須条件（ゲート）**です。
致命的バグが1つでも残っている場合は、総合点に関わらず**不合格**となります。

| バグID | 内容 | 判定 |
|--------|------|------|
| C-1 | フォーム値の受け取りミス（`titel` → `title`） | 修正必須 |
| C-2 | バリデーション条件の反転（deleteメソッド：`if (result.success)` → `if (!result.success)`） | 修正必須 |
| C-3 | 更新処理が新規作成に（`create` → `update`） | 修正必須 |

### 試験時間の目安

**4時間程度**を想定しています。

- 平日に課題を出した場合：**3営業日以内**での提出を目安とする
- 金曜日や週末に課題を出した場合：**週明け（月曜または火曜）まで**での提出を目安とする

---

## 1. 実装力（60点満点）

非致命的バグ（20グループ）から発見・対応した分を評価します。
**同種のバグは1グループとしてカウント**し、横展開の能力を評価します。

※ 全部は見つからない想定で、上限つきで採点します。

### 採点ルール

| 条件 | 点数 |
|------|------|
| 1箇所のみのバグ：発見・対応 | 5点 |
| 複数箇所あるバグ：1箇所発見 | 3点 |
| 複数箇所あるバグ：全箇所対応（横展開） | 5点 |
| **上限** | **60点** |

#### 【カテゴリ1】命名規則（4グループ）

| バグID | 内容 | 配点 |
|--------|------|------|
| N-1 | 不適切な変数名（短すぎる: `n`） | 5点 |
| N-2 | 命名規則の不統一（スネークケース: `find_all`）※複数箇所 | 3点→5点 |
| N-3 | 配列変数が複数形でない（`note`）※複数箇所 | 3点→5点 |
| N-4 | bool変数の命名が不適切（`found`）| 5点 |

#### 【カテゴリ2】設計（4グループ）

| バグID | 内容 | 配点 |
|--------|------|------|
| N-5 | updateメソッドのnullチェック漏れ | 5点 |
| N-6 | 削除処理がGETリクエストで実行可能（route.ts + _item.ejs）※複数箇所 | 3点→5点 |
| N-7 | 存在しないノートへのアクセス時に500を返している（edit + delete）※複数箇所 | 3点→5点 |
| N-8 | URLパターンが不適切（リソースIDがアクションの前にない）※複数箇所 | 3点→5点 |

#### 【カテゴリ3】保守性（4グループ）

| バグID | 内容 | 配点 |
|--------|------|------|
| N-9 | マジックナンバー（4箇所）※複数箇所 | 3点→5点 |
| N-10 | エラーメッセージハードコーディング（3箇所）※複数箇所 | 3点→5点 |
| N-11 | 型アサーションの乱用（`as any`・3箇所）※複数箇所 | 3点→5点 |
| N-12 | 冗長な文字列結合（3箇所）※複数箇所 | 3点→5点 |

#### 【カテゴリ4】可読性（4グループ）

| バグID | 内容 | 配点 |
|--------|------|------|
| N-13 | ネストが深いif文（早期リターン未使用） | 5点 |
| N-14 | 冗長な条件分岐（titleだけ冗長な書き方） | 5点 |
| N-15 | else節が不要な箇所でのelse使用 | 5点 |
| N-16 | 冗長な三項演算子 | 5点 |

#### 【カテゴリ5】コード整理（4グループ）

| バグID | 内容 | 配点 |
|--------|------|------|
| N-17 | `var`の使用 | 5点 |
| N-18 | デバッグ用`console.log`の残存 | 5点 |
| N-19 | 未使用インポートの残存（NoteType, ValidationRule）※複数箇所 | 3点→5点 |
| N-20 | 再代入しない`let`の使用（`const`にすべき）※複数箇所 | 3点→5点 |

---

## 2. 協働力（40点満点）

### 2-1. Pull Request（16点）

| 項目 | 配点 | 評価基準 |
|------|------|----------|
| タイトル | 3点 | 修正内容が一目で分かる（3点） / 「Fix」「Update」のみ（0点） |
| 対応内容 | 7点 | 何を・なぜ・どう修正したか明確で分かりやすい（7点） / 何をは書いてあるがなぜ/どうがない（3点） / 記載なし（0点） |
| 動作確認 | 3点 | 具体的な確認内容記載（3点） / 確認したとだけ書いてある（1点） / 記載なし（0点） |
| 粒度 | 3点 | PR1つに含まれる修正内容に規則性がある（3点） / PRは分割されているが修正内容が不規則（1点） / すべて1つのPRで修正している（0点） |

### 2-2. Issue（12点）

| 項目 | 配点 | 評価基準 |
|------|------|----------|
| タイトル | 2点 | 問題が一目で分かる（2点） / 抽象的・不明瞭（0点） |
| 問題の説明 | 6点 | 何が問題で、どこにあるか明確（6点） / 問題は書いてあるが場所が不明確（3点） / 記載不十分（0点） |
| 粒度 | 4点 | 1件ずつ分離されている（4点） / ある程度まとまっている（2点） / すべて1つのIssueにまとめている（0点） |

### 2-3. ブランチ運用（12点）

| 項目 | 配点 | 評価基準 |
|------|------|----------|
| ブランチ命名 | 4点 | 規約に従った命名（例: `fix/typo-in-form-validation`）（4点） / 命名しているが規約に沿っていない（2点） / `test`, `branch1`など意味のない命名（0点） |
| ブランチ戦略 | 4点 | mainからブランチを切りPRでマージ（4点） / mainに直接コミット（0点） |
| コミットメッセージ | 4点 | 修正内容が分かりやすい（4点） / 最低限の説明（2点） / 「fix」「update」のみ（0点） |

---

## 3. ボーナス加点（+α）

100点を超える加点として、想定外の優れた成果に対してボーナス点を付与します。

### 中級バグ・改善点の発見・対応

| バグID | 内容 | Issue作成 | 修正実装 |
|--------|------|-----------|----------|
| M-1 | 環境設定のハードコーディング | 2点 | 3点 |
| M-2 | updated_atカラムの欠如 | 2点 | 3点 |
| M-3 | SQLインジェクション脆弱性（helper.ts） | 2点 | 3点 |
| M-4 | バリデーション設計の問題（validator.ts） | 2点 | 3点 |
| M-5 | HTTPステータスコードのハードコーディング | 1点 | 2点 |

### その他ボーナス

| カテゴリ | 内容 | 配点 |
|----------|------|------|
| 想定外のバグ発見 | こちらが想定していないバグ・問題点を発見した | 各2点（上限4点） |
| 改善提案 | コード品質やアーキテクチャの改善を提案した | 各1点（上限3点） |
| テストの追加 | バグ修正に加えてテストを追加した | 2点 |
| ドキュメント改善 | README等の誤りを指摘・修正した | 1点 |

※ ボーナスは上限10点まで
※ 課題の本質（致命的バグ修正）がおろそかな場合はボーナス対象外

---

## 評価シート

**候補者名:** ___________________
**評価日:** ___________________
**評価者:** ___________________

---

### ゲート条件：致命的バグの修正

> 1つでも未修正の場合は不合格

- [ ] C-1: `titel` typo
- [ ] C-2: バリデーション条件反転（delete）
- [ ] C-3: `create` → `update` 誤り

**ゲート判定:** [ ] 通過 / [ ] 不合格

---

### 1. 実装力（60点満点）

#### 非致命的バグの発見・対応

**【命名規則】4グループ**
- [ ] N-1: 不適切な変数名（`n`） → 5点
- [ ] N-2: 命名規則不統一（`find_all`）※複数 → 3点 / 5点
- [ ] N-3: 配列が複数形でない（`note`）※複数 → 3点 / 5点
- [ ] N-4: bool変数の命名が不適切（`found`） → 5点

**【設計】4グループ**
- [ ] N-5: updateのnullチェック漏れ → 5点
- [ ] N-6: 削除処理がGET（route + ejs）※複数 → 3点 / 5点
- [ ] N-7: 不適切なステータスコード500（2箇所）※複数 → 3点 / 5点
- [ ] N-8: URLパターンが不適切（IDがアクションの前にない）※複数 → 3点 / 5点

**【保守性】4グループ**
- [ ] N-9: マジックナンバー（4箇所）※複数 → 3点 / 5点
- [ ] N-10: エラーメッセージHC（3箇所）※複数 → 3点 / 5点
- [ ] N-11: 型アサーション乱用（`as any`・3箇所）※複数 → 3点 / 5点
- [ ] N-12: 冗長な文字列結合（3箇所）※複数 → 3点 / 5点

**【可読性】4グループ**
- [ ] N-13: ネストが深いif文 → 5点
- [ ] N-14: 冗長な条件分岐（title） → 5点
- [ ] N-15: 不要なelse節 → 5点
- [ ] N-16: 冗長な三項演算子 → 5点

**【コード整理】4グループ**
- [ ] N-17: `var`の使用 → 5点
- [ ] N-18: デバッグ用`console.log` → 5点
- [ ] N-19: 未使用インポート（2箇所）※複数 → 3点 / 5点
- [ ] N-20: 再代入しない`let`（2箇所）※複数 → 3点 / 5点

**【実装力 合計（上限60点）】:** ___/60点

---

### 2. 協働力（40点満点）

#### Pull Request（16点）
- タイトル: ___/3点
- 対応内容: ___/7点
- 動作確認: ___/3点
- 粒度: ___/3点（規則性あり:3 / 不規則:1 / 1PR:0）

**小計:** ___/16点

#### Issue（12点）
- タイトル: ___/2点
- 問題の説明: ___/6点
- 粒度: ___/4点（1件ずつ:4 / まとまり:2 / 1つ:0）

**小計:** ___/12点

#### ブランチ運用（12点）
- ブランチ命名: ___/4点
- ブランチ戦略: ___/4点
- コミットメッセージ: ___/4点

**小計:** ___/12点

**【協働力 合計】:** ___/40点

---

### 3. ボーナス加点（+α）

**中級バグ**
- [ ] M-1: 環境設定のHC → Issue:2点 / 修正:3点
- [ ] M-2: updated_atカラム欠如 → Issue:2点 / 修正:3点
- [ ] M-3: SQLインジェクション → Issue:2点 / 修正:3点
- [ ] M-4: バリデーション設計 → Issue:2点 / 修正:3点
- [ ] M-5: ステータスコードHC → Issue:1点 / 修正:2点

**その他**
- [ ] 想定外のバグ発見（各2点、上限4点）: ___点
- [ ] 改善提案（各1点、上限3点）: ___点
- [ ] テストの追加: 2点
- [ ] ドキュメント改善: 1点

**【ボーナス合計（上限10点）】:** ___点

---

### 総合評価

- ゲート条件（致命的バグ）: [ ] 通過 / [ ] 不合格
- 実装力: ___/60点
- 協働力: ___/40点
- ボーナス: +___点
- **最終得点: ___点**

**合否判定:** [ ] 合格（60点以上＆ゲート通過） / [ ] 不合格

---

### コメント

**良かった点:**


**改善点:**

---

## 評価ガイドライン

### 合格の目安

| 評価 | 点数 |
|------|------|
| A（優秀） | 80点以上 |
| B（合格） | 60-79点 |
| C（不合格） | 60点未満 |

### 横展開の評価について

**横展開とは**: 1つのバグを発見した際に、同種のバグが他にもないか確認し、全て言及すること

**評価例:**
- N-8「マジックナンバー」を1箇所言及 → 3点
- N-8「マジックナンバー」を4箇所全て言及 → 5点

**横展開ができている候補者の特徴:**
- 「同じ問題が他にもあるかもしれない」と考える習慣がある　
- コードベース全体を俯瞰して問題を探せる
- 実務で求められる品質意識を持っている

### 不合格となるケース

1. **致命的バグが1つでも残っている**
2. **Issue/PRを作成していない**

---

## 評価時の注意事項

1. **評価のブレを防ぐ**
   - 複数人で評価する場合は、事前にこの基準を共有する
   - サンプルの「良いPR」「悪いPR」を用意しておく

2. **致命的バグ**
   - **最低条件として扱い、採点対象外とする**

3. **非致命的バグ**
   - 上限あり（60点）
   - Issue作成のみでも「発見」として評価

4. **ボーナス加点**
   - 100点を超える加点（上限10点）
   - 要求/想定しているところ以上の対応についてはこの枠で評価

---

## バグ該当箇所一覧

### 致命的バグ（3グループ）- ゲート条件

| ID | 内容 | ファイル | 行番号 | 修正内容 |
|----|------|----------|--------|----------|
| C-1 | `titel` typo | controller.ts | 33-34 | `titel` → `title` |
| C-2 | バリデーション条件反転 | controller.ts | 149 | `if (result.success)` → `if (!result.success)` |
| C-3 | update処理がcreateに | controller.ts | 134 | `Note.create` → `Note.update(id, ...)` |

### 非致命的バグ（20グループ）

#### 【命名規則】4グループ

| ID | 内容 | ファイル | 行番号 | 修正内容 |
|----|------|----------|--------|----------|
| N-1 | 不適切な変数名 `n` | controller.ts | 17 | `n` → `notes` |
| N-2 | 命名規則不統一 `find_all` | model.ts | 138 | `find_all` → `findAll` |
| | | controller.ts | 17, 43, 75, 85, 105, 150, 161 | 同上（呼び出し箇所） |
| N-3 | 配列が複数形でない `note` | controller.ts | 43, 150, 161 | `note` → `notes` |
| N-4 | bool変数の命名が不適切 | controller.ts | 159 | `found` → `isFound` or `exists` |

#### 【設計】4グループ

| ID | 内容 | ファイル | 行番号 | 修正内容 |
|----|------|----------|--------|----------|
| N-5 | nullチェック漏れ | controller.ts | 114 | `Note.find(id)` の結果確認前に処理 |
| N-6 | 削除処理がGET | route.ts | 22 | `.get` → `.post` |
| | | _item.ejs | 60 | `<a href>` → `<form method="POST">` |
| N-7 | 不適切なステータスコード500 | controller.ts | 81, 167 | `500` → `404` |
| N-8 | URLパターンがリソースIDの前にアクションとなっている | route.ts | 16, 19, 22 | `/action/:id` → `/:id/action` |
| | | model.ts | 36, 43, 50 | 同上 |

#### 【保守性】4グループ

| ID | 内容 | ファイル | 行番号 | 修正内容 |
|----|------|----------|--------|----------|
| N-9 | マジックナンバー | model.ts | 197, 206, 228, 237 | `100`, `1000` を定数化 |
| N-10 | エラーメッセージHC | controller.ts | 79, 163 | 定数化推奨 |
| | | model.ts | エラー文字列箇所 | 同上 |
| N-11 | `as any` 乱用 | model.ts | 165 | 適切な型定義 |
| | | controller.ts | 128, 147 | 同上 |
| N-12 | 冗長な文字列結合 | model.ts | 36, 43, 50 | テンプレートリテラル使用 |

#### 【可読性】4グループ

| ID | 内容 | ファイル | 行番号 | 修正内容 |
|----|------|----------|--------|----------|
| N-13 | ネストが深いif文 | controller.ts | 65-91 | 早期リターンでフラット化 |
| N-14 | 冗長な条件分岐 | controller.ts | 33-35 | シンプルな条件式に |
| N-15 | 不要なelse節 | model.ts | 258-262 | 早期リターン使用 |
| N-16 | 冗長な三項演算子 | model.ts | 154 | `return result ? true : false` → `return result` |

#### 【コード整理】4グループ

| ID | 内容 | ファイル | 行番号 | 修正内容 |
|----|------|----------|--------|----------|
| N-17 | `var` の使用 | controller.ts | 40 | `var` → `const` |
| N-18 | デバッグ用 `console.log` | controller.ts | 144 | 削除 |
| N-19 | 未使用インポート | controller.ts | 4 | `NoteType` 削除 |
| | | model.ts | 2 | `ValidationRule` 削除 |
| N-20 | 再代入しない `let` | controller.ts | 117, 118 | `let` → `const` |

### 中級バグ・改善点（5グループ）- ボーナス

| ID | 内容 | ファイル | 行番号 | 修正内容 |
|----|------|----------|--------|----------|
| M-1 | 環境設定HC | config/index.ts | 9 | `dbPath` を環境変数対応 |
| M-2 | updated_at欠如 | model.ts | 74-79 | Note型とDBスキーマにupdated_at追加 |
| M-3 | SQLインジェクション | lib/db/helper.ts | 50, 72, 129 | プレースホルダ使用 |
| M-4 | バリデーション設計 | lib/validator.ts | 全体 | ストラテジーパターン適用 |
| M-5 | ステータスコードHC | controller.ts | 48, 89, 110, 130, 166等 | 定数化 |
